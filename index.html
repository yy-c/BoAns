<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>答案之书</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --ios-bg: #050505;
            --ios-gold: #D4AF37;
            --ios-gold-dim: #8a7020;
            --paper-color: #fdfbf7;
            --ink-color: #2b2b2b;
            
            --book-w: 240px;
            --book-h: 340px;
            --book-depth: 36px;
            
            --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --ease-apple: cubic-bezier(0.25, 1, 0.5, 1);
        }

        @font-face {
            font-family: 'Songti SC';
            src: local('Songti SC'), local('STSong'), local('Noto Serif SC'), serif;
        }

        body {
            background-color: var(--ios-bg);
            background-image: radial-gradient(circle at 50% 120%, #1a1a1a 0%, #000000 70%);
            color: #fff;
            height: 100vh;
            overflow: hidden;
            font-family: "PingFang SC", -apple-system, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding-bottom: env(safe-area-inset-bottom);
            -webkit-tap-highlight-color: transparent;
            touch-action: none;
            user-select: none;
        }

        /* --- 顶部提示 --- */
        .header-area {
            margin-top: 40px;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            pointer-events: none;
            transition: opacity 0.5s ease;
            opacity: 1;
        }

        .hint-title {
            font-family: 'Songti SC', serif;
            font-size: 18px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.95);
            letter-spacing: 2px;
            margin-bottom: 8px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .hint-subtitle {
            font-family: 'Songti SC', serif;
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
            font-weight: normal;
        }

        /* --- 3D 舞台 --- */
        .scene {
            perspective: 1600px;
            width: var(--book-w);
            height: var(--book-h);
            position: relative;
            z-index: 10;
            margin-top: 10px; 
        }

        .book {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(15deg) rotateY(0deg) rotateZ(-2deg);
            transition: transform 0.8s var(--ease-spring);
        }

        .book.tension {
            transform: rotateX(25deg) rotateY(0deg) scale(0.96) translateZ(-10px);
            transition: transform 0.5s cubic-bezier(0.33, 1, 0.68, 1);
        }

        .book.open {
            transform: rotateX(0deg) rotateY(0deg) translateY(30px) scale(1.05);
            transition: transform 0.9s var(--ease-apple);
        }

        /* --- 封面设计 --- */
        .face {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            border-radius: 4px 12px 12px 4px;
            backface-visibility: hidden;
        }

        .cover-front {
            transform-origin: left;
            transition: transform 0.9s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 20;
            transform-style: preserve-3d;
        }

        .book.open .cover-front {
            transform: rotateY(-180deg);
        }

        .cover-outer {
            position: absolute;
            width: 100%; height: 100%;
            background: #111;
            background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.5' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
            border-radius: 4px 12px 12px 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                inset 2px 2px 5px rgba(255,255,255,0.05),
                inset -5px -5px 20px rgba(0,0,0,0.8);
            border-left: 2px solid #222;
        }

        .cover-border {
            width: 82%;
            height: 88%;
            border: 1px solid var(--ios-gold-dim);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .cover-border::after {
            content: '';
            position: absolute;
            top: 4px; left: 4px; right: 4px; bottom: 4px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .title-box {
            font-family: 'Songti SC', serif;
            font-size: 48px;
            font-weight: 900;
            line-height: 1.3;
            letter-spacing: 12px;
            text-align: center;
            color: transparent;
            background: linear-gradient(135deg, #cfb53b 0%, #fceabb 50%, #b88a00 100%);
            -webkit-background-clip: text;
            background-clip: text;
            filter: drop-shadow(0 1px 0 rgba(0,0,0,0.8)) drop-shadow(0 -1px 0 rgba(255,255,255,0.2));
            padding-left: 12px; 
        }

        .cover-inner {
            position: absolute;
            width: 100%; height: 100%;
            background: #f0f0f0;
            border-radius: 4px 12px 12px 4px;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            box-shadow: inset 10px 0 30px rgba(0,0,0,0.15);
        }

        .spine {
            position: absolute;
            left: 0; top: 0;
            width: var(--book-depth); height: 100%;
            background: #0a0a0a;
            transform: rotateY(-90deg) translateZ(calc(var(--book-depth) / 2));
            transform-origin: left;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        .cover-back {
            background: #111;
            transform: translateZ(calc(var(--book-depth) * -1));
            border-radius: 4px 12px 12px 4px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.6);
        }

        /* --- 内页 --- */
        .pages-block {
            position: absolute;
            top: 5px; left: 5px;
            width: calc(100% - 10px); height: calc(100% - 10px);
            background: #fff;
            transform: translateZ(calc(var(--book-depth) * -0.5));
            border-radius: 0 8px 8px 0;
            background: repeating-linear-gradient(90deg, #fdfbf7 0px, #ebe8e0 1px, #fdfbf7 3px);
        }

        .result-page {
            position: absolute;
            top: 5px; left: 2px;
            width: calc(100% - 10px); height: calc(100% - 10px);
            background: var(--paper-color);
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
            transform-origin: left;
            z-index: 10;
            border-radius: 0 8px 8px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 5px 0 15px rgba(0,0,0,0.05);
        }

        .answer-container {
            border: 1px solid rgba(0,0,0,0.08);
            padding: 40px 20px;
            width: 80%;
            height: 70%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .answer-text {
            font-family: 'Songti SC', serif;
            font-size: 24px;
            font-weight: 600;
            color: var(--ink-color);
            text-align: center;
            line-height: 1.8;
            letter-spacing: 6px;
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.8s ease-out 0.5s;
            text-shadow: 0 0 1px rgba(0,0,0,0.1);
            margin-bottom: 40px;
        }

        .book.open .answer-text {
            opacity: 1;
            transform: scale(1);
        }

        .seal {
            width: 24px;
            height: 24px;
            border: 1px solid #a83f39;
            color: #a83f39;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.5s ease 1s;
            font-family: 'Songti SC', serif;
        }
        
        .book.open .seal {
            opacity: 0.6;
        }

        /* --- 底部控制区 --- */
        .control-area {
            height: 240px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; 
            padding-top: 20px;
            position: relative;
            z-index: 50;
            margin-top: 10px;
        }

        .action-ring {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s var(--ease-apple);
            position: relative;
            background: rgba(255,255,255,0.02);
            backdrop-filter: blur(5px);
            cursor: pointer;
        }

        .fingerprint-container {
            font-size: 42px;
            color: rgba(255,255,255,0.25);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }

        .action-ring.holding {
            transform: scale(1.1);
            border-color: rgba(212, 175, 55, 0.3);
            background: rgba(212, 175, 55, 0.05);
            box-shadow: 0 0 25px rgba(212, 175, 55, 0.2);
        }

        .action-ring.holding .fingerprint-container {
            color: var(--ios-gold);
            filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.8));
            animation: scanPulse 1.2s infinite ease-in-out;
        }

        @keyframes scanPulse {
            0% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.6; transform: scale(1); }
        }

        .action-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: opacity 0.5s, transform 0.5s;
        }

        .action-wrapper.hidden {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.9);
        }

        .progress-svg {
            position: absolute;
            top: -2px; left: -2px;
            width: 84px; height: 84px;
            transform: rotate(-90deg);
            pointer-events: none;
        }

        .progress-circle {
            stroke: var(--ios-gold);
            stroke-width: 2;
            fill: none;
            stroke-dasharray: 251;
            stroke-dashoffset: 251;
            transition: stroke-dashoffset 0.1s linear;
            stroke-linecap: round;
        }

        .action-label {
            margin-top: 16px;
            font-family: 'Songti SC', serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 3px;
            transition: opacity 0.3s;
        }
        
        .action-ring.holding + .action-label {
            opacity: 0.9;
            color: var(--ios-gold);
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        /* --- 结果操作组 (按钮+文字) --- */
        .result-group {
            position: absolute;
            top: 80px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transform: translateY(20px);
            transition: all 0.8s cubic-bezier(0.25, 1, 0.5, 1);
            z-index: 60;
            width: 100%;
        }

        .result-group.show {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }

        .reset-btn {
            font-family: 'Songti SC', serif;
            font-size: 15px;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 12px 32px;
            cursor: pointer;
            letter-spacing: 2px;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .reset-btn:active {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(0.96);
        }

        .quote-text {
            margin-top: 20px;
            font-family: 'Songti SC', serif;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            letter-spacing: 1px;
            text-align: center;
            max-width: 80%;
            line-height: 1.5;
        }
    </style>
</head>
<body>

    <div class="header-area" id="hint">
        <div class="hint-title">心中默念你的问题</div>
        <div class="hint-subtitle">问题越清晰，答案越准确</div>
    </div>

    <div class="scene">
        <div class="book" id="book">
            <div class="face cover-front">
                <div class="cover-outer">
                    <div class="cover-border">
                        <div class="title-box">答案<br>之书</div>
                    </div>
                </div>
                <div class="cover-inner"></div>
            </div>
            <div class="face spine"></div>
            <div class="face cover-back"></div>
            <div class="pages-block"></div>
            <div class="result-page">
                <div class="answer-container">
                    <div class="answer-text" id="answer"></div>
                    <div class="seal">启</div>
                </div>
            </div>
        </div>
    </div>

    <div class="control-area">
        <div class="action-wrapper" id="actionWrapper">
            <div class="action-ring" id="actionBtn">
                <div class="fingerprint-container">
                    <i class="fa-solid fa-fingerprint"></i>
                </div>
                <svg class="progress-svg">
                    <circle class="progress-circle" id="progressRing" cx="42" cy="42" r="40"></circle>
                </svg>
            </div>
            <div class="action-label">长按翻书</div>
        </div>

        <!-- 结果操作组 -->
        <div class="result-group" id="resultGroup">
            <div class="reset-btn" id="resetBtn">合上书本</div>
            <div class="quote-text">当长按翻书的那一秒，你就已经有了答案。</div>
        </div>
    </div>

    <script>
        const answers = [
            // 肯定类
            "是的", "绝对是", "毫无疑问", "当然", "前景很好", "你会成功的", "值得一试", "放手去做", "结果会很棒", "这是个好机会",
            "现在就是时候", "相信你的直觉", "这就是命运", "你会得到你想要的", "坚持下去", "一切都会好起来", "你会为此感到高兴",
            "这正是你需要的", "别犹豫", "勇往直前", "你会得到支持", "这是一个明确的“是”", "你会惊喜的",
            
            // 否定类
            "算了吧", "这不明智", "你需要停下来", "这不是个好主意", "别被诱惑", "现在不是时候", "保持现状",
            
            // 建议/行动类
            "再等等", "你需要更多耐心", "问问你的朋友", "睡一觉再说", "专注于你自己", "改变你的视角", "你需要休息",
            "别太在意", "顺其自然", "你需要计划", "别回头", "勇敢一点", "你需要帮助", "独自面对", "保持冷静",
            "你需要冒险", "保守秘密", "你需要放手", "重新开始", "你需要学习", "别太贪心", "原谅自己", "你需要旅行", 
            "整理你的思绪", "你需要锻炼",
            
            // 哲学/模糊类
            "答案在你心中", "时间会证明一切", "这取决于你", "别担心未来", "活在当下", "这只是暂时的", "你会明白的",
            "这不重要", "你需要寻找平衡", "别被表象迷惑", "你需要信任", "这是一次考验", "你会成长的", "你需要爱",
            "别害怕改变", "你需要感恩", "你需要快乐", "你需要自由", "你需要和平", "你需要勇气", "你需要智慧",
            
            // 趣味/随机
            "抛个硬币吧", "去喝杯水", "深呼吸", "数到十", "看看窗外", "笑一笑", "给家人打个电话", "吃顿好的",
            "听首喜欢的歌", "整理房间", "写下来", "别想太多", "这是个秘密", "我不告诉你", "你猜",
            "你需要拥抱", "你需要阳光", "你需要雨水", "你需要风", "你需要大地",
            
            // 其他
            "也许吧", "很难说", "看情况", "如果你想的话", "为什么不呢", "试试看", "别怕", "你可以的",
            "相信自己", "别放弃", "再试一次", "你会找到办法的", "这很简单", "这很有趣", "这很美", "看云，看羊，看看云羊"
        ];

        const book = document.getElementById('book');
        const hint = document.getElementById('hint');
        const actionBtn = document.getElementById('actionBtn');
        const actionWrapper = document.getElementById('actionWrapper');
        const resultGroup = document.getElementById('resultGroup');
        const resetBtn = document.getElementById('resetBtn');
        const answerEl = document.getElementById('answer');
        const progressRing = document.getElementById('progressRing');

        let animationFrame;
        let startTime;
        let isHolding = false;
        let isOpen = false;
        const HOLD_TIME = 1300; 

        const startEvents = ['touchstart', 'mousedown'];
        const endEvents = ['touchend', 'mouseup', 'mouseleave'];

        startEvents.forEach(evt => {
            actionBtn.addEventListener(evt, startHold, { passive: false });
        });

        endEvents.forEach(evt => {
            actionBtn.addEventListener(evt, endHold);
            document.addEventListener(evt, endHold);
        });

        resetBtn.addEventListener('click', resetBook);

        function startHold(e) {
            if (isOpen) return;
            if(e.type === 'touchstart') e.preventDefault(); 
            
            isHolding = true;
            startTime = Date.now();
            
            actionBtn.classList.add('holding');
            book.classList.add('tension');
            hint.style.opacity = "0.8";

            tick();
        }

        function tick() {
            if (!isHolding) return;

            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / HOLD_TIME, 1);
            
            const offset = 251 - (251 * progress);
            progressRing.style.strokeDashoffset = offset;

            if (progress >= 1) {
                revealAnswer();
            } else {
                animationFrame = requestAnimationFrame(tick);
            }
        }

        function endHold() {
            if (!isHolding) return;
            isHolding = false;
            cancelAnimationFrame(animationFrame);

            if (!isOpen) {
                actionBtn.classList.remove('holding');
                book.classList.remove('tension');
                progressRing.style.strokeDashoffset = 251;
                hint.style.opacity = "1";
            }
        }

        function revealAnswer() {
            isOpen = true;
            isHolding = false;
            
            book.classList.remove('tension');
            book.classList.add('open');
            actionBtn.classList.remove('holding');
            actionWrapper.classList.add('hidden');
            
            const randomAnswer = answers[Math.floor(Math.random() * answers.length)];
            answerEl.innerText = randomAnswer;

            hint.style.opacity = "0";

            // 显示结果操作组（按钮+文字）
            setTimeout(() => {
                resultGroup.classList.add('show');
            }, 1000);
        }

        function resetBook() {
            isOpen = false;
            book.classList.remove('open');
            resultGroup.classList.remove('show');
            
            setTimeout(() => {
                actionWrapper.classList.remove('hidden');
                progressRing.style.strokeDashoffset = 251;
                hint.style.opacity = "1";
                answerEl.innerText = "";
            }, 800);
        }
    </script>
</body>
</html>
